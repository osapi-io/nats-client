<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# client

```go
import "github.com/osapi-io/nats-client/pkg/client"
```

## Index

- [Variables](<#variables>)
- [type AuthOptions](<#AuthOptions>)
- [type AuthType](<#AuthType>)
- [type Client](<#Client>)
  - [func New\(logger \*slog.Logger, opts \*Options\) \*Client](<#New>)
  - [func \(c \*Client\) Connect\(\) error](<#Client.Connect>)
  - [func \(c \*Client\) CreateKVBucket\(bucketName string\) \(nats.KeyValue, error\)](<#Client.CreateKVBucket>)
  - [func \(c \*Client\) CreateOrUpdateJetStream\(ctx context.Context, streamConfigs ...\*StreamConfig\) error](<#Client.CreateOrUpdateJetStream>)
- [type ConsumerConfig](<#ConsumerConfig>)
- [type NATSConnWrapper](<#NATSConnWrapper>)
  - [func \(n \*NATSConnWrapper\) Close\(\)](<#NATSConnWrapper.Close>)
  - [func \(n \*NATSConnWrapper\) Connect\(url string, opts ...nats.Option\) \(\*nats.Conn, error\)](<#NATSConnWrapper.Connect>)
  - [func \(n \*NATSConnWrapper\) ConnectedUrl\(\) string](<#NATSConnWrapper.ConnectedUrl>)
  - [func \(n \*NATSConnWrapper\) JetStream\(opts ...nats.JSOpt\) \(nats.JetStreamContext, error\)](<#NATSConnWrapper.JetStream>)
- [type NATSConnector](<#NATSConnector>)
- [type Options](<#Options>)
- [type StreamConfig](<#StreamConfig>)


## Variables

<a name="GetJetStream"></a>GetJetStream is a public variable function wrapping jetstream.New.

```go
var GetJetStream = func(nc *nats.Conn) (jetstream.JetStream, error) {
    return jetstream.New(nc)
}
```

<a name="AuthOptions"></a>
## type AuthOptions

AuthOptions holds authentication\-related settings for connecting to NATS.

```go
type AuthOptions struct {
    // AuthType specifies the authentication method to use (NoAuth, UserPassAuth, or NKeyAuth).
    AuthType AuthType
    // Username is required for UserPassAuth and represents the NATS username.
    Username string
    // Password is required for UserPassAuth and represents the NATS password.
    Password string
    // NKeyFile is required for NKeyAuth and specifies the path to the NKEY private seed file.
    // This file should contain an Ed25519 private key (starting with "S").
    NKeyFile string
}
```

<a name="AuthType"></a>
## type AuthType

AuthType defines the different authentication methods supported by the client.

```go
type AuthType int
```

<a name="NoAuth"></a>

```go
const (
    // NoAuth represents a connection with no authentication.
    NoAuth AuthType = iota
    // UserPassAuth represents authentication using a username and password.
    UserPassAuth
    // NKeyAuth represents authentication using NATS NKEYs (Ed25519 public-private key pairs).
    NKeyAuth
)
```

<a name="Client"></a>
## type Client

Client provides an implementation for interacting with an embedded NATS server.

```go
type Client struct {

    // NC underlying connection.
    NC  NATSConnector
    // NativeJS is the native JetStream context used for provisioning streams and consumers.
    NativeJS nats.JetStreamContext
    // ExtJS is the extended JetStream API for high-level operations (e.g. retrieving streams/consumers).
    ExtJS jetstream.JetStream
    // Opts configuration options used to create the client
    Opts *Options
    // KeyPair allows injecting a mock `nkeys.KeyPair` for testing authentication logic.
    KeyPair nkeys.KeyPair
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func New

```go
func New(logger *slog.Logger, opts *Options) *Client
```

New creates a new Client instance using the provided logger and Options.

<a name="Client.Connect"></a>
### func \(\*Client\) Connect

```go
func (c *Client) Connect() error
```

Connect establishes the connection to the NATS server and JetStream context. This method returns an error if there are any issues during connection.

<a name="Client.CreateKVBucket"></a>
### func \(\*Client\) CreateKVBucket

```go
func (c *Client) CreateKVBucket(bucketName string) (nats.KeyValue, error)
```

CreateKVBucket ensures a KV bucket exists and returns the KeyValue interface.

<a name="Client.CreateOrUpdateJetStream"></a>
### func \(\*Client\) CreateOrUpdateJetStream

```go
func (c *Client) CreateOrUpdateJetStream(ctx context.Context, streamConfigs ...*StreamConfig) error
```

CreateOrUpdateJetStream configures JetStream streams and consumers.

<a name="ConsumerConfig"></a>
## type ConsumerConfig

ConsumerConfig extends nats.ConsumerConfig to include custom settings for an embedded NATS server consumer configuration.

```go
type ConsumerConfig struct {
    // ConsumerConfig embeds nats.ConsumerConfig, which includes configurations
    // such as durable name, acknowledgment policy, max deliver attempts, and more.
    *jetstream.ConsumerConfig
}
```

<a name="NATSConnWrapper"></a>
## type NATSConnWrapper

NATSConnWrapper is a concrete implementation of NATSConnector, wrapping a \*nats.Conn.

```go
type NATSConnWrapper struct {
    Conn *nats.Conn
}
```

<a name="NATSConnWrapper.Close"></a>
### func \(\*NATSConnWrapper\) Close

```go
func (n *NATSConnWrapper) Close()
```

Close wraps the Close method of nats.Conn.

<a name="NATSConnWrapper.Connect"></a>
### func \(\*NATSConnWrapper\) Connect

```go
func (n *NATSConnWrapper) Connect(url string, opts ...nats.Option) (*nats.Conn, error)
```

Connect establishes a connection to the NATS server with the given URL and options.

<a name="NATSConnWrapper.ConnectedUrl"></a>
### func \(\*NATSConnWrapper\) ConnectedUrl

```go
func (n *NATSConnWrapper) ConnectedUrl() string
```

ConnectedUrl wraps the ConnectedUrl method of nats.Conn.

<a name="NATSConnWrapper.JetStream"></a>
### func \(\*NATSConnWrapper\) JetStream

```go
func (n *NATSConnWrapper) JetStream(opts ...nats.JSOpt) (nats.JetStreamContext, error)
```

JetStream wraps the JetStream method of nats.Conn.

<a name="NATSConnector"></a>
## type NATSConnector

NATSConnector defines an interface for managing a NATS connection.

```go
type NATSConnector interface {
    JetStream(opts ...nats.JSOpt) (nats.JetStreamContext, error)
    Close()
    ConnectedUrl() string
    Connect(url string, opts ...nats.Option) (*nats.Conn, error)
}
```

<a name="Options"></a>
## type Options

Options holds the configuration for connecting to a NATS server, including connection details and authentication settings.

```go
type Options struct {
    // Host specifies the NATS server hostname or IP address.
    Host string
    // Port specifies the NATS server port.
    Port int
    // Auth contains authentication settings for connecting to the NATS server.
    Auth AuthOptions
    // Name is a human-readable name for this client connection.
    Name string
}
```

<a name="StreamConfig"></a>
## type StreamConfig

StreamConfig extends nats.StreamConfig to include custom settings for an embedded NATS server stream configuration.

```go
type StreamConfig struct {
    // StreamConfig embeds nats.StreamConfig, which defines the core stream settings
    // such as name, subjects, storage type, and replication factor.
    *nats.StreamConfig

    // Consumers represents the list of consumer configurations associated with this stream.
    // Each consumer defines how messages from the stream are consumed and acknowledged.
    Consumers []*ConsumerConfig
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
